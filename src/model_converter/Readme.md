# Конвертирование моделей с разным батчом

## Описание скрипта

### Основная информация

Скрипт позволяет конвертировать модели в формат OpenVINO с изменением размера
пачки

### Алгоритм работы скрипта

Скрипт принимает на вход конфигурации тестов. Описание конфигурации 
тестов можно посмотреть [здесь](../configs/README.md).

Тест представляет собой запуск вывода одной модели с параметрами,
переданными в конфигурации.

Конвертация моделей проводится последовательно. Каждая конвертация
запускается в отдельном процессе.

### Результаты работы скрипта конвертации

Результатом конвертации являются сконвертированные модели

Иехархия папок моделей остается такой же, какая была в оригинале 
(например `public/alexnet/FP32/`), только для моделей с размером пачки > 1 они
находятся внутри папки, название которой это название размера пачки (например 
`2/public/alexnet/FP32/`)

 - Модели с размером пачки 1 будут в папке <working_dir>
 - Модели с размером пачки 2 будут в папке <working_dir>/2

## Использование скрипта

Сначала необходимо выполнить запуск скрипта скачивания всех моделей в рабочую папку

```bash
omz_downloader --all --output_dir <working_dir> --cache_dir <cache_dir>
```

Общий вид командной строки конвертации:

```bash
omz_converter <arguments>
```

Аргументы командной строки:

- `-d / --dir <working_dir>` - рабочая папка с моделями.
- `-z / --zoo_config_dir <path_to_dir_with_model_configs>` - корневая папка с
 конфигами конвертации публичных моделей

Пример запуска в текущем окружении:

```bash
omz_converter \
    -d /tmp/ -z C:/_dev/env_dlbench/Lib/site-packages/openvino/model_zoo/models/ \
	-b 1 8
```


<!-- LINKS -->
[openvino-toolkit]: https://software.intel.com/en-us/openvino-toolkit
